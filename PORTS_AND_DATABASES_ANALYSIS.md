# üîç –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç–æ–≤ –∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

**Date:** 2025-01-XX
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –ø–æ—Ä—Ç–∞–º –∏ –ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∫ –ø–æ—Ä—Ç–∞–º API

---

## üìã –¢–ï–ö–£–©–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### –ü–æ—Ä—Ç—ã API —Å–µ—Ä–≤–∏—Å–æ–≤

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|------|------------|
| `api-monolith` | **7000** | –ú–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ API |
| `api-gateway` | **7100** | API Gateway |
| `api-auth` | **7200** | –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| `api-notifications` | **7201** | –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π |
| `app-admin` | **7300** | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å (frontend) |
| `app-web` | **7301** | –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (frontend) |

### –ü–æ—Ä—Ç—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö (—Ç–µ–∫—É—â–∏–µ)

| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | –ü–æ—Ä—Ç | –°–µ—Ä–≤–∏—Å | –°—Ç–∞—Ç—É—Å |
|-------------|------|--------|--------|
| PostgreSQL (–æ–±—â–∏–π) | **5432** | –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã | ‚ö†Ô∏è –û–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å –¥–ª—è –≤—Å–µ—Ö |

**–¢–µ–∫—É—â–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
- `workix_monolith` - –¥–ª—è –º–æ–Ω–æ–ª–∏—Ç–∞
- `workix_auth` - –¥–ª—è auth —Å–µ—Ä–≤–∏—Å–∞

---

## üí° –ü–†–ï–î–õ–û–ñ–ï–ù–ò–ï: –õ–æ–≥–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –ø–æ—Ä—Ç–æ–≤ –ë–î –∫ –ø–æ—Ä—Ç–∞–º API

### –°—Ö–µ–º–∞: API –ø–æ—Ä—Ç ‚Üí –ë–î –ø–æ—Ä—Ç

| API –°–µ—Ä–≤–∏—Å | API –ü–æ—Ä—Ç | –ë–î –ü–æ—Ä—Ç | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | –õ–æ–≥–∏–∫–∞ |
|------------|----------|---------|-------------|--------|
| `api-monolith` | 7000 | **7000** | `workix_monolith` | API 7000 ‚Üí –ë–î 7000 |
| `api-gateway` | 7100 | **7100** | `workix_gateway` | API 7100 ‚Üí –ë–î 7100 |
| `api-auth` | 7200 | **7200** | `workix_auth` | API 7200 ‚Üí –ë–î 7200 |
| `api-notifications` | 7201 | **7201** | `workix_notifications` | API 7201 ‚Üí –ë–î 7201 |

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–õ–æ–≥–∏—á–Ω–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å - –ø–æ—Ä—Ç –ë–î = –ø–æ—Ä—Ç API
2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–π PostgreSQL –∏–Ω—Å—Ç–∞–Ω—Å
3. **–ò–∑–æ–ª—è—Ü–∏—è:** –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
4. **–ì–∏–±–∫–æ—Å—Ç—å:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω PostgreSQL —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã

---

## üîÑ –í–ê–†–ò–ê–ù–¢–´ –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–¥–∏–Ω PostgreSQL —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏ (Development)

```yaml
# docker-compose.yml
services:
  postgres-monolith:
    image: postgres:16-alpine
    ports:
      - "7000:5432"  # API 7000 ‚Üí –ë–î 7000
    environment:
      POSTGRES_DB: workix_monolith

  postgres-gateway:
    image: postgres:16-alpine
    ports:
      - "7100:5432"  # API 7100 ‚Üí –ë–î 7100
    environment:
      POSTGRES_DB: workix_gateway

  postgres-auth:
    image: postgres:16-alpine
    ports:
      - "7200:5432"  # API 7200 ‚Üí –ë–î 7200
    environment:
      POSTGRES_DB: workix_auth

  postgres-notifications:
    image: postgres:16-alpine
    ports:
      - "7201:5432"  # API 7201 ‚Üí –ë–î 7201
    environment:
      POSTGRES_DB: workix_notifications
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–¥–∏–Ω PostgreSQL —Å —Ä–∞–∑–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ (–¢–µ–∫—É—â–∏–π, —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)

```yaml
# docker-compose.yml
services:
  postgres:
    image: postgres:16-alpine
    ports:
      - "5432:5432"  # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç PostgreSQL
    environment:
      POSTGRES_DB: postgres
    # –í—Å–µ –±–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º –∏–Ω—Å—Ç–∞–Ω—Å–µ
```

**DATABASE_URL:**
- `api-monolith`: `postgresql://postgres:postgres@localhost:5432/workix_monolith`
- `api-auth`: `postgresql://postgres:postgres@localhost:5432/workix_auth`
- `api-notifications`: `postgresql://postgres:postgres@localhost:5432/workix_notifications`

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π (–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –¥–ª—è Development)

**–û–¥–∏–Ω PostgreSQL –∏–Ω—Å—Ç–∞–Ω—Å, –Ω–æ –ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –ø–æ—Ä—Ç–æ–≤:**

```yaml
# docker-compose.yml
services:
  postgres:
    image: postgres:16-alpine
    ports:
      - "7000:5432"  # –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ä—Ç –¥–ª—è –º–æ–Ω–æ–ª–∏—Ç–∞
      - "7100:5432"  # Gateway (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —Å–≤–æ—è –ë–î)
      - "7200:5432"  # Auth
      - "7201:5432"  # Notifications
    environment:
      POSTGRES_DB: postgres
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –ø–æ—Ä—Ç 5432, –Ω–æ –ª–æ–≥–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å:**

```yaml
postgres:
  ports:
    - "5432:5432"  # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç
  # –ù–æ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫—É—é –ø—Ä–∏–≤—è–∑–∫—É:
  # API 7000 ‚Üí –ë–î workix_monolith –Ω–∞ –ø–æ—Ä—Ç—É 5432
  # API 7200 ‚Üí –ë–î workix_auth –Ω–∞ –ø–æ—Ä—Ç—É 5432
```

---

## üìä –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### –î–ª—è Development (—Ç–µ–∫—É—â–∏–π —ç—Ç–∞–ø)

‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω PostgreSQL –Ω–∞ –ø–æ—Ä—Ç—É 5432** —Å —Ä–∞–∑–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:
- `workix_monolith` ‚Üí API 7000
- `workix_auth` ‚Üí API 7200
- `workix_notifications` ‚Üí API 7201
- `workix_gateway` ‚Üí API 7100 (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ú–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –õ–µ–≥—á–µ —É–ø—Ä–∞–≤–ª—è—Ç—å

### –î–ª—è Production (–±—É–¥—É—â–µ–µ)

‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ PostgreSQL –∏–Ω—Å—Ç–∞–Ω—Å—ã** —Å –ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–æ–π –ø–æ—Ä—Ç–æ–≤:
- API 7000 ‚Üí PostgreSQL –Ω–∞ –ø–æ—Ä—Ç—É 7000
- API 7200 ‚Üí PostgreSQL –Ω–∞ –ø–æ—Ä—Ç—É 7200
- API 7201 ‚Üí PostgreSQL –Ω–∞ –ø–æ—Ä—Ç—É 7201

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

---

## üîß –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–ü–ï–¶–ò–§–ò–ö–ê–¶–ò–ò

### –ü–æ—Ä—Ç—ã API (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

| Application | Port | Purpose |
|------------|------|---------|
| api-monolith | 7000 | Monolithic API |
| api-gateway | 7100 | API Gateway |
| api-auth | 7200 | Auth service |
| api-notifications | 7201 | Notifications service |
| app-admin | 7300 | Admin frontend |
| app-web | 7301 | Web frontend |

### –ü–æ—Ä—Ç—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö (–ù–û–í–û–ï)

| Database | Port | API Service | Database Name |
|----------|------|-------------|---------------|
| PostgreSQL (Monolith) | 5432 / 7000 | api-monolith (7000) | workix_monolith |
| PostgreSQL (Gateway) | 5432 / 7100 | api-gateway (7100) | workix_gateway |
| PostgreSQL (Auth) | 5432 / 7200 | api-auth (7200) | workix_auth |
| PostgreSQL (Notifications) | 5432 / 7201 | api-notifications (7201) | workix_notifications |

**–ü—Ä–∞–≤–∏–ª–æ:** –í Development –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω PostgreSQL (5432) —Å —Ä–∞–∑–Ω—ã–º–∏ –±–∞–∑–∞–º–∏. –í Production - –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã —Å –ø–æ—Ä—Ç–∞–º–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ API –ø–æ—Ä—Ç–∞–º.

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê: –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–∏ —Å–µ—Ä–≤–∏—Å–∞ —Å–≤–æ—è –±–∞–∑–∞?

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

| –°–µ—Ä–≤–∏—Å | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | –°—Ç–∞—Ç—É—Å |
|--------|-------------|--------|
| `api-monolith` | `workix_monolith` | ‚úÖ –ï—Å—Ç—å |
| `api-auth` | `workix_auth` | ‚úÖ –ï—Å—Ç—å |
| `api-notifications` | ‚ùå –ù–µ—Ç | ‚ö†Ô∏è –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å |
| `api-gateway` | ‚ùå –ù–µ—Ç | ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ –Ω–µ –Ω—É–∂–Ω–∞ (stateless) |

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **api-monolith** ‚Üí `workix_monolith` ‚úÖ
2. **api-auth** ‚Üí `workix_auth` ‚úÖ
3. **api-notifications** ‚Üí `workix_notifications` ‚ö†Ô∏è –°–æ–∑–¥–∞—Ç—å (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)
4. **api-gateway** ‚Üí –ù–µ –Ω—É–∂–Ω–∞ (stateless —Å–µ—Ä–≤–∏—Å, —Ç–æ–ª—å–∫–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)

---

## üìù –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ—Ä—Ç–æ–≤
2. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ—Ä—Ç–æ–≤ —Å –ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–æ–π –ë–î
3. ‚è≥ –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `workix_notifications` –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
4. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å `docker-compose.yml` —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –æ –ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–µ
5. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `.specify/specs-optimized/architecture/ports.md`









