<div class="dashboard-container">
  @if (config().title) {
  <h2 class="dashboard-title">{{ config().title }}</h2>
  } @if (isLoading()) {
  <div class="loading">
    <workix-spinner [loading]="true" [size]="'lg'" />
  </div>
  } @if (errorMessage()) {
  <div class="error-message">
    {{ errorMessage() }}
  </div>
  } @if (!isLoading() && config()) {
  <div class="dashboard-content">
    <!-- Stats Grid -->
    <div class="stats-grid" [style.grid-template-columns]="'repeat(' + gridCols() + ', 1fr)'">
      @for (stat of config().stats; track stat.title) {
      <workix-card
        [styleClass]="'stat-card stat-card-' + (stat.color || 'primary')"
        (click)="onStatClick(stat)"
        [style.cursor]="stat.onClick ? 'pointer' : 'default'"
      >
        <div class="stat-content">
          @if (stat.icon) {
          <div class="stat-icon">
            <workix-icon [name]="stat.icon" [size]="'lg'" />
          </div>
          }
          <div class="stat-info">
            <h3 class="stat-title">{{ stat.title }}</h3>
            <p class="stat-value">{{ stat.value }}</p>
            @if (stat.trend) {
            <div class="stat-trend" [class]="'trend-' + stat.trend.direction">
              <workix-icon
                [name]="
                  stat.trend.direction === 'up'
                    ? 'arrow_upward'
                    : stat.trend.direction === 'down'
                    ? 'arrow_downward'
                    : 'remove'
                "
                [size]="'sm'"
              />
              <span>{{ stat.trend.value }}%</span>
            </div>
            }
          </div>
        </div>
      </workix-card>
      }
    </div>

    <!-- Recent Activities -->
    @if (config().showActivities !== false && config().activities && config().activities.length > 0)
    {
    <workix-card [styleClass]="'activities-card'">
      <div class="activities-header">
        <h3>{{ config().activitiesTitle || 'Recent Activity' }}</h3>
      </div>
      <div class="activities-content">
        <ul class="activity-list">
          @for (activity of config().activities; track activity.id) {
          <li
            class="activity-item"
            [class]="'activity-' + (activity.type || 'info')"
            (click)="onActivityClick(activity)"
            [style.cursor]="activity.onClick ? 'pointer' : 'default'"
          >
            @if (activity.icon) {
            <div class="activity-icon">
              <workix-icon [name]="activity.icon" [size]="'md'" />
            </div>
            }
            <div class="activity-content">
              <strong class="activity-title">{{ activity.title }}</strong>
              @if (activity.description) {
              <p class="activity-description">{{ activity.description }}</p>
              }
              <small class="activity-timestamp">{{ activity.timestamp | date : 'short' }}</small>
            </div>
          </li>
          }
        </ul>
      </div>
    </workix-card>
    }
  </div>
  }
</div>
