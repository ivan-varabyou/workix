<div class="workix-admin-layout" [class.dark-theme]="isDarkMode()">
  <workix-toolbar [color]="'primary'" [class]="'admin-toolbar'">
    <ng-content select="[toolbar-content]"></ng-content>
    <button type="button" (click)="toggleSidenav()" class="menu-button" aria-label="Toggle menu">
      <workix-icon name="menu"></workix-icon>
    </button>
    <span class="toolbar-spacer"></span>
    <h1>{{ title() }}</h1>
    <span class="toolbar-spacer"></span>
    <button
      type="button"
      (click)="onToggleDarkMode()"
      class="theme-toggle"
      [attr.aria-label]="isDarkMode() ? 'Light mode' : 'Dark mode'"
    >
      <workix-icon [name]="themeIcon()"></workix-icon>
    </button>
    @if (userMenu()) {
    <workix-menu class="user-menu">
      <button type="button" workix-menu-trigger aria-label="User menu">
        <workix-icon name="account_circle"></workix-icon>
      </button>
      <workix-menu-content>
        @if (userMenu()?.items && userMenu()!.items.length > 0) { @for (item of userMenu()!.items;
        track item.label) {
        <workix-menu-item [routerLink]="item.routerLink" (click)="item.action?.()">
          <workix-icon [name]="item.icon"></workix-icon>
          <span>{{ item.label }}</span>
        </workix-menu-item>
        } } @else { @if (userMenu()?.profileRoute) {
        <workix-menu-item [routerLink]="userMenu()!.profileRoute!">
          <workix-icon name="person"></workix-icon>
          <span>Profile</span>
        </workix-menu-item>
        } @if (userMenu()?.settingsRoute) {
        <workix-menu-item [routerLink]="userMenu()!.settingsRoute!">
          <workix-icon name="settings"></workix-icon>
          <span>Settings</span>
        </workix-menu-item>
        }
        <workix-divider></workix-divider>
        <workix-menu-item (click)="onLogout()">
          <workix-icon name="logout"></workix-icon>
          <span>Logout</span>
        </workix-menu-item>
        }
      </workix-menu-content>
    </workix-menu>
    }
  </workix-toolbar>

  <workix-sidenav-container class="sidenav-container">
    <workix-sidenav
      #sidenav
      [mode]="'side'"
      [class]="'sidenav'"
      [opened]="true"
      [fixedInViewport]="true"
      [fixedTopGap]="64"
    >
      <workix-list>
        @for (item of menuItems(); track item.routerLink || item.route || item.label) {
        <workix-list-item [routerLink]="item.routerLink || item.route">
          <workix-icon [name]="item.icon"></workix-icon>
          <span>{{ item.label }}</span>
        </workix-list-item>
        }
      </workix-list>
    </workix-sidenav>

    <workix-sidenav-content class="content">
      <router-outlet></router-outlet>
    </workix-sidenav-content>
  </workix-sidenav-container>
</div>
