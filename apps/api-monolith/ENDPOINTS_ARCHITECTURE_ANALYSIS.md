# üìä –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**Date:** 2025-11-16
**Status:** üîç –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ systems

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CLIENT / BROWSER                    ‚îÇ
‚îÇ  (localhost:4200/docs)              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  API GATEWAY (Port 4200)   ‚îÇ
    ‚îÇ  Base: /api/v1/*           ‚îÇ
    ‚îÇ  ‚îú‚îÄ Service Discovery      ‚îÇ
    ‚îÇ  ‚îú‚îÄ Request Routing        ‚îÇ
    ‚îÇ  ‚îî‚îÄ Health Checks          ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ       ‚îÇ       ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ       ‚îÇ
    ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
    ‚îÇ       ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚ñº       ‚ñº       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Auth    ‚îÇ Monolith ‚îÇ Gateway  ‚îÇ
‚îÇ Service ‚îÇ API      ‚îÇ Only     ‚îÇ
‚îÇ (7200)  ‚îÇ (7000)   ‚îÇ          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìã –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### üîê Auth API (Port 7200)
**Base Path:** `/api/v1/auth` (via Gateway) –∏–ª–∏ `/api/auth` (–Ω–∞–ø—Ä—è–º—É—é)

**–î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:**
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω, logout
- ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ Refresh —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ OAuth2 (Google, GitHub, Apple)
- ‚úÖ 2FA (–¥–≤—É—Ö—Ñ–∞who—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- ‚úÖ Phone OTP
- ‚úÖ Email Verification
- ‚úÖ Password Reset
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** (GET /users, GET /users/:id, PUT /users/:id, DELETE /users/:id)
- ‚úÖ **–ü—Ä–æ—Ñ–∏–ª–∏ users** (UserProfile)

**–¢–µ–∫—É—â–µ–µ status:**
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è - –ï–°–¢–¨
- ‚úÖ OAuth2 - –ï–°–¢–¨
- ‚úÖ 2FA - –ï–°–¢–¨
- ‚úÖ Phone OTP - –ï–°–¢–¨
- ‚úÖ Email Verification - –ï–°–¢–¨
- ‚úÖ Password Reset - –ï–°–¢–¨
- ‚ùå **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ - –û–¢–°–£–¢–°–¢–í–£–ï–¢ (exists –≤ –º–æ–Ω–æ–ª–∏—Ç–µ!)**

---

### üè¢ Monolith API (Port 7000)
**Base Path:** `/api/v1/*` (via Gateway) –∏–ª–∏ `/api/v1/*` (–Ω–∞–ø—Ä—è–º—É—é)

**–î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:**
- ‚úÖ Pipelines (creation, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, execution)
- ‚úÖ RBAC (—Ä–æ–ª–∏, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è)
- ‚úÖ Workers (–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –≤–æ—Ä–∫–µ—Ä—ã)
- ‚úÖ Integrations (–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, credentials, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- ‚úÖ Analytics (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è analytics)
- ‚úÖ E-commerce (–ø—Ä–æ–¥—É–∫—Ç—ã, –ø—Ä–æ–¥–∞–≤—Ü—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
- ‚úÖ Generation (AI generation: —Ç–µ–∫—Å—Ç, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ, speech, embeddings)
- ‚úÖ A/B Testing
- ‚úÖ Monitoring (health –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π, metrics, –∞–ª–µ—Ä—Ç—ã)
- ‚ùå **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ - –ù–ï –î–û–õ–ñ–ù–û –ë–´–¢–¨!**

**–¢–µ–∫—É—â–µ–µ status:**
- ‚úÖ Pipelines - –ï–°–¢–¨
- ‚úÖ RBAC - –ï–°–¢–¨
- ‚úÖ Workers - –ï–°–¢–¨
- ‚úÖ Integrations - –ï–°–¢–¨
- ‚úÖ Analytics - –ï–°–¢–¨
- ‚úÖ E-commerce - –ï–°–¢–¨
- ‚úÖ Generation - –ï–°–¢–¨
- ‚úÖ A/B Testing - –ï–°–¢–¨
- ‚úÖ Monitoring - –ï–°–¢–¨
- ‚ùå **Users Controller - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û –†–ê–ó–ú–ï–©–ï–ù!**

---

### üåê API Gateway (Port 4200)
**Base Path:** `/api/v1/*`

**Functions:**
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è request–æ–≤ –∫ –º–∏–∫—Ä–æservice–∞–º
- ‚úÖ Service Discovery
- ‚úÖ Health Checks
- ‚úÖ Swagger document–∞—Ü–∏—è (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)

**–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:**
```
/api/v1/auth/*          ‚Üí Auth Service (7200)
/api/v1/users/*         ‚Üí Auth Service (7200) - –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú–ò
/api/v1/pipelines/*     ‚Üí Monolith API (7000)
/api/v1/rbac/*          ‚Üí Monolith API (7000)
/api/v1/workers/*        ‚Üí Monolith API (7000)
/api/v1/integrations/*   ‚Üí Monolith API (7000)
/api/v1/analytics/*      ‚Üí Monolith API (7000)
/api/v1/generation/*     ‚Üí Monolith API (7000)
/api/v1/ab-tests/*       ‚Üí Monolith API (7000)
```

---

## üìä –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ all—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### üîê Auth API (Port 7200) - 27 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

#### Authentication (6)
1. ‚úÖ `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
2. ‚úÖ `POST /api/auth/login` - –í—Ö–æ–¥
3. ‚úÖ `POST /api/auth/verify` - –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
4. ‚úÖ `POST /api/auth/refresh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
5. ‚úÖ `GET /api/auth/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
6. ‚úÖ `GET /api/auth/health` - Health check

#### Password Reset (3)
7. ‚úÖ `POST /api/auth/password-reset/request` - –ó–∞–ø—Ä–æ—Å —Å–±—Ä–æ—Å–∞
8. ‚úÖ `POST /api/auth/password-reset/verify` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
9. ‚úÖ `POST /api/auth/password-reset/confirm` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–±—Ä–æ—Å–∞

#### 2FA (6)
10. ‚úÖ `POST /api/auth/2fa/generate` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–∞
11. ‚úÖ `POST /api/auth/2fa/enable` - –í–∫–ª—é—á–µ–Ω–∏–µ 2FA
12. ‚úÖ `POST /api/auth/2fa/verify` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
13. ‚úÖ `DELETE /api/auth/2fa/disable` - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ 2FA
14. ‚úÖ `GET /api/auth/2fa/status` - –°—Ç–∞—Ç—É—Å 2FA
15. ‚úÖ `POST /api/auth/2fa/regenerate-backup-codes` - –†–µgeneration –∫–æ–¥–æ–≤

#### OAuth2 (6)
16. ‚úÖ `GET /api/auth/oauth/google` - Google OAuth2
17. ‚úÖ `GET /api/auth/oauth/google/callback` - Google Callback
18. ‚úÖ `GET /api/auth/oauth/github` - GitHub OAuth2
19. ‚úÖ `GET /api/auth/oauth/github/callback` - GitHub Callback
20. ‚úÖ `GET /api/auth/oauth/apple` - Apple Sign In
21. ‚úÖ `GET /api/auth/oauth/apple/callback` - Apple Callback

#### Phone OTP (2)
22. ‚úÖ `POST /api/auth/phone-otp/send` - –û—Ç–ø—Ä–∞–≤–∫–∞ OTP
23. ‚úÖ `POST /api/auth/phone-otp/verify` - –ü—Ä–æ–≤–µ—Ä–∫–∞ OTP

#### Email Verification (4)
24. ‚úÖ `POST /api/auth/email-verification/send` - –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞
25. ‚úÖ `POST /api/auth/email-verification/verify` - –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è email
26. ‚úÖ `POST /api/auth/email-verification/resend` - –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
27. ‚úÖ `GET /api/auth/email-verification/status` - –°—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

#### ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç: User Management (4)
28. ‚ùå `GET /api/users` - –°–ø–∏—Å–æ–∫ users (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
29. ‚ùå `GET /api/users/:userId` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
30. ‚ùå `PUT /api/users/:userId` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
31. ‚ùå `DELETE /api/users/:userId` - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
32. ‚ùå `POST /api/users/:userId/avatar` - –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞

**–ò—Ç–æ–≥–æ –≤ Auth API:** 27 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 32)

---

### üè¢ Monolith API (Port 7000) - 100+ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

#### App Controller (3)
1. ‚úÖ `GET /api/v1/health` - Health check
2. ‚úÖ `GET /api/v1/info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± API
3. ‚úÖ `GET /api/v1/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ systems

#### ‚ùå Users Controller (4) - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û –†–ê–ó–ú–ï–©–ï–ù!
4. ‚ùå `GET /api/v1/users/:userId` - **–î–û–õ–ñ–ù–û –ë–´–¢–¨ –í AUTH API**
5. ‚ùå `PUT /api/v1/users/:userId` - **–î–û–õ–ñ–ù–û –ë–´–¢–¨ –í AUTH API**
6. ‚ùå `POST /api/v1/users/:userId/avatar` - **–î–û–õ–ñ–ù–û –ë–´–¢–¨ –í AUTH API**
7. ‚ùå `DELETE /api/v1/users/:userId` - **–î–û–õ–ñ–ù–û –ë–´–¢–¨ –í AUTH API**

#### Pipelines Controller (6)
8. ‚úÖ `POST /api/v1/pipelines` - –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞
9. ‚úÖ `GET /api/v1/pipelines` - –°–ø–∏—Å–æ–∫ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
10. ‚úÖ `GET /api/v1/pipelines/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞
11. ‚úÖ `PUT /api/v1/pipelines/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞
12. ‚úÖ `DELETE /api/v1/pipelines/:id` - –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞
13. ‚úÖ `GET /api/v1/pipelines/marketplace/list` - –ü—É–±–ª–∏—á–Ω—ã–µ –ø–∞–π–ø–ª–∞–π–Ω—ã

#### RBAC Controller (9)
14. ‚úÖ `POST /api/v1/rbac/roles` - –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–ª–∏
15. ‚úÖ `GET /api/v1/rbac/roles` - –°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π
16. ‚úÖ `GET /api/v1/rbac/roles/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–∏
17. ‚úÖ `PUT /api/v1/rbac/roles/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–∏
18. ‚úÖ `DELETE /api/v1/rbac/roles/:id` - –£–¥–∞–ª–µ–Ω–∏–µ —Ä–æ–ª–∏
19. ‚úÖ `POST /api/v1/rbac/permissions` - –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
20. ‚úÖ `GET /api/v1/rbac/permissions` - –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
21. ‚úÖ `POST /api/v1/rbac/assign-role` - –ù–∞value —Ä–æ–ª–∏
22. ‚úÖ `DELETE /api/v1/rbac/assign-role` - –£–¥–∞–ª–µ–Ω–∏–µ —Ä–æ–ª–∏

#### Workers Controller (13)
23. ‚úÖ `POST /api/v1/workers` - –°–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞
24. ‚úÖ `GET /api/v1/workers` - –°–ø–∏—Å–æ–∫ –≤–æ—Ä–∫–µ—Ä–æ–≤
25. ‚úÖ `GET /api/v1/workers/:workerId` - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞
26. ‚úÖ `PUT /api/v1/workers/:workerId` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞
27. ‚úÖ `DELETE /api/v1/workers/:workerId` - –£–¥–∞–ª–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞
28. ‚úÖ `POST /api/v1/workers/:workerId/tasks` - –ù–∞value –∑–∞–¥–∞—á–∏
29. ‚úÖ `GET /api/v1/workers/:workerId/tasks` - –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
30. ‚úÖ `GET /api/v1/workers/:workerId/tasks/:taskId` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
31. ‚úÖ `PUT /api/v1/workers/:workerId/tasks/:taskId/cancel` - –û—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á–∏
32. ‚úÖ `GET /api/v1/workers/:workerId/status` - –°—Ç–∞—Ç—É—Å –≤–æ—Ä–∫–µ—Ä–∞
33. ‚úÖ `PUT /api/v1/workers/:workerId/pause` - –ü–∞—É–∑–∞ –≤–æ—Ä–∫–µ—Ä–∞
34. ‚úÖ `PUT /api/v1/workers/:workerId/resume` - –í–æ–∑update –≤–æ—Ä–∫–µ—Ä–∞
35. ‚úÖ `GET /api/v1/workers/:workerId/metrics` - –ú–µthree–∫–∏ –≤–æ—Ä–∫–µ—Ä–∞

#### A/B Testing Controller (8)
36. ‚úÖ `POST /api/v1/ab-tests` - –°–æ–∑–¥–∞–Ω–∏–µ A/B —Ç–µ—Å—Ç–∞
37. ‚úÖ `GET /api/v1/ab-tests` - –°–ø–∏—Å–æ–∫ A/B —Ç–µ—Å—Ç–æ–≤
38. ‚úÖ `GET /api/v1/ab-tests/:testId` - –ü–æ–ª—É—á–µ–Ω–∏–µ A/B —Ç–µ—Å—Ç–∞
39. ‚úÖ `POST /api/v1/ab-tests/:testId/track` - –¢—Ä–µ–∫–∏–Ω–≥ —Å–æ–±—ã—Ç–∏—è
40. ‚úÖ `GET /api/v1/ab-tests/:testId/results` - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞
41. ‚úÖ `PUT /api/v1/ab-tests/:testId/end` - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
42. ‚úÖ `PUT /api/v1/ab-tests/:testId/pause` - –ü–∞—É–∑–∞ —Ç–µ—Å—Ç–∞
43. ‚úÖ `PUT /api/v1/ab-tests/:testId/resume` - –í–æ–∑update —Ç–µ—Å—Ç–∞

#### Integration CRUD Controller (13)
44. ‚úÖ `GET /api/v1/integrations/providers` - –°–ø–∏—Å–æ–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
45. ‚úÖ `GET /api/v1/integrations/providers/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
46. ‚úÖ `POST /api/v1/integrations/providers` - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
47. ‚úÖ `PUT /api/v1/integrations/providers/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
48. ‚úÖ `DELETE /api/v1/integrations/providers/:id` - –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
49. ‚úÖ `POST /api/v1/integrations/providers/:id/credentials` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ credentials
50. ‚úÖ `GET /api/v1/integrations/providers/:id/credentials` - –°–ø–∏—Å–æ–∫ credentials
51. ‚úÖ `GET /api/v1/integrations/providers/credentials/:credentialId` - –ü–æ–ª—É—á–µ–Ω–∏–µ credential
52. ‚úÖ `PUT /api/v1/integrations/providers/credentials/:credentialId` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ credential
53. ‚úÖ `DELETE /api/v1/integrations/providers/credentials/:credentialId` - –£–¥–∞–ª–µ–Ω–∏–µ credential
54. ‚úÖ `POST /api/v1/integrations/providers/:id/credentials/rotate` - –†–æ—Ç–∞—Ü–∏—è credentials
55. ‚úÖ `POST /api/v1/integrations/providers/:id/config` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
56. ‚úÖ `GET /api/v1/integrations/providers/:id/config` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### E-commerce Controller (7)
57. ‚úÖ `GET /api/v1/integrations/ecommerce/products/search` - –ü–æ–∏—Å–∫ –ø—Ä–æ–¥—Éwho–≤
58. ‚úÖ `POST /api/v1/integrations/ecommerce/products/upload` - –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞
59. ‚úÖ `GET /api/v1/integrations/ecommerce/products/:provider/:productId` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞
60. ‚úÖ `PUT /api/v1/integrations/ecommerce/products/:provider/:productId` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
61. ‚úÖ `POST /api/v1/integrations/ecommerce/products/bulk-upload` - –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
62. ‚úÖ `GET /api/v1/integrations/ecommerce/sellers/:provider/metrics` - –ú–µthree–∫–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞
63. ‚úÖ `GET /api/v1/integrations/ecommerce/categories/:provider` - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

#### Analytics Controller (4)
64. ‚úÖ `POST /api/v1/analytics/universal/analyze` - –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
65. ‚úÖ `POST /api/v1/analytics/universal/retention` - –ê–Ω–∞–ª–∏–∑ —É–¥–µ—Ä–∂–∞–Ω–∏—è
66. ‚úÖ `POST /api/v1/analytics/universal/predict` - –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ
67. ‚úÖ `POST /api/v1/analytics/universal/compare` - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

#### Integration Monitoring Controller (3)
68. ‚úÖ `GET /api/v1/integrations/monitoring/health` - –ó–¥–æ—Ä–æ–≤—å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
69. ‚úÖ `GET /api/v1/integrations/monitoring/alerts` - –ê–ª–µ—Ä—Ç—ã
70. ‚úÖ `GET /api/v1/integrations/monitoring/dashboard` - –î–∞—à–±–æ—Ä–¥

#### Integration Metrics Controller (3)
71. ‚úÖ `GET /api/v1/integrations/metrics` - –û–±—â–∏–µ metrics
72. ‚úÖ `GET /api/v1/integrations/metrics/provider/:providerId` - –ú–µthree–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
73. ‚úÖ `GET /api/v1/integrations/metrics/errors` - –û—à–∏–±–∫–∏

#### Integration Health Controller (2)
74. ‚úÖ `GET /api/v1/integrations/health` - –û–±—â–µ–µ health
75. ‚úÖ `GET /api/v1/integrations/health/:providerId` - –ó–¥–æ—Ä–æ–≤—å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

#### Credential Rotation Controller (4)
76. ‚úÖ `POST /api/v1/integrations/credentials/rotate/all` - –†–æ—Ç–∞—Ü–∏—è all—Ö
77. ‚úÖ `POST /api/v1/integrations/credentials/rotate/provider/:providerId` - –†–æ—Ç–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
78. ‚úÖ `POST /api/v1/integrations/credentials/rotate/expired` - –†–æ—Ç–∞—Ü–∏—è –∏—Å—Ç–µ–∫—à–∏—Ö
79. ‚úÖ `POST /api/v1/integrations/credentials/rotate/expiring` - –†–æ—Ç–∞—Ü–∏—è –∏—Å—Ç–µ–∫–∞—é—â–∏—Ö

#### Generation Controller (13)
80. ‚úÖ `POST /api/v1/generation/text` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
81. ‚úÖ `POST /api/v1/generation/text/variations` - –í–∞—Ä–∏–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
82. ‚úÖ `POST /api/v1/generation/image` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
83. ‚úÖ `POST /api/v1/generation/image/variations` - –í–∞—Ä–∏–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
84. ‚úÖ `POST /api/v1/generation/video` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ
85. ‚úÖ `POST /api/v1/generation/speech` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—á–∏
86. ‚úÖ `POST /api/v1/generation/vision/analyze` - –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
87. ‚úÖ `POST /api/v1/generation/search` - –ü–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
88. ‚úÖ `POST /api/v1/generation/embedding` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–∞
89. ‚úÖ `POST /api/v1/generation/context` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
90. ‚úÖ `POST /api/v1/generation/translate` - –ü–µ—Ä–µ–≤–æ–¥
91. ‚úÖ `POST /api/v1/generation/translate/detect` - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
92. ‚úÖ `POST /api/v1/generation/quality/score` - –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

**–ò—Ç–æ–≥–æ –≤ Monolith API:** 100 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (4 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–º–µ—â–µ–Ω—ã)

---

## üö® –ü—Ä–æ–±–ª–µ–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 1. ‚ùå Users Controller –≤ –º–æ–Ω–æ–ª–∏—Ç–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `UsersController` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `apps/api-monolith/src/app/users/users.controller.ts`
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ Auth API

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `UsersController` –≤ `apps/api-auth/src/auth/controllers/users.controller.ts`
2. –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –≤ API Gateway
3. –£–¥–∞–ª–∏—Ç—å `UsersController` –∏–∑ –º–æ–Ω–æ–ª–∏—Ç–∞

### 2. ‚ùå –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

**–ü—Ä–æ–±–ª–µ–º–∞:**
- API Gateway uses `/api/v1/*`
- Auth API uses `/api/auth/*` (without –≤–µ—Ä—Å–∏–∏)
- Monolith API uses `/api/v1/*` (—Å –≤–µ—Ä—Å–∏–µ–π)

**–†–µ—à–µ–Ω–∏–µ:**
- **API Gateway:** `/api/v1/*` - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- **Auth API (–Ω–∞–ø—Ä—è–º—É—é):** `/api/v1/auth/*` - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Monolith API (–Ω–∞–ø—Ä—è–º—É—é):** `/api/v1/*` - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **API Gateway –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:**
  - `/api/v1/auth/*` ‚Üí `http://localhost:7200/api/v1/auth/*`
  - `/api/v1/users/*` ‚Üí `http://localhost:7200/api/v1/users/*`
  - `/api/v1/pipelines/*` ‚Üí `http://localhost:7000/api/v1/pipelines/*`

### 3. ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ Auth API

**–°–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:**
- `GET /api/users` - –°–ø–∏—Å–æ–∫ users (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
- `GET /api/users/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (—É–¥–æ–±–Ω–µ–µ —á–µ–º `/:userId`)
- `GET /api/users/search?q=...` - –ü–æ–∏—Å–∫ users

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å Users Controller –≤ Auth API

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å `apps/api-auth/src/auth/controllers/users.controller.ts`
2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É –∏–∑ `apps/api-monolith/src/app/users/users.controller.ts`
3. –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã (use `UserProfileService` –∏–∑ `@workix/domain/users`)
4. –£–¥–∞–ª–∏—Ç—å `UsersController` –∏–∑ –º–æ–Ω–æ–ª–∏—Ç–∞
5. –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –≤ API Gateway

### 2. –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Auth API

**–®–∞–≥–∏:**
1. –û–±–Ω–æ–≤–∏—Ç—å `apps/api-auth/src/main.ts`:
   ```typescript
   app.setGlobalPrefix('api/v1');
   ```
2. –û–±–Ω–æ–≤–∏—Ç—å all –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:
   - `@Controller('auth')` ‚Üí `@Controller('auth')` (path –æ—Å—Ç–∞–Ω–µ—Ç—Å—è `/api/v1/auth`)
   - `@Controller('users')` ‚Üí `@Controller('users')` (path –±—É–¥–µ—Ç `/api/v1/users`)

### 3. –û–±–Ω–æ–≤–∏—Ç—å API Gateway –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é

**–®–∞–≥–∏:**
1. –û–±–Ω–æ–≤–∏—Ç—å `apps/api-gateway/src/app/services/proxy.service.ts`:
   ```typescript
   if (cleanPath.startsWith('/auth')) return 'auth';
   if (cleanPath.startsWith('/users')) return 'auth'; // Users —Ç–æ–∂–µ –≤ Auth API
   ```
2. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é service–æ–≤:
   ```typescript
   AUTH_SERVICE_URL=http://localhost:7200/api/v1
   MONOLITH_URL=http://localhost:7000/api/v1
   ```

### 4. –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

**–í Auth API:**
- `GET /api/v1/users` - –°–ø–∏—Å–æ–∫ users
- `GET /api/v1/users/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `GET /api/v1/users/search?q=...` - –ü–æ–∏—Å–∫ users

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è statistics

| –°–µ—Ä–≤–∏—Å | –≠–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ | –°—Ç–∞—Ç—É—Å |
|--------|-----------|--------|
| **Auth API** | 27 (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 32) | ‚ö†Ô∏è –ù–µ–ø–æ–ª–Ω—ã–π |
| **Monolith API** | 100 (4 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ) | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
| **API Gateway** | –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **–ò–¢–û–ì–û** | **127** | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç refactoring–∞ |

---

## üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
1. ‚úÖ –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `UsersController` –∏–∑ –º–æ–Ω–æ–ª–∏—Ç–∞ –≤ Auth API
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Auth API (`/api/v1/*`)
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –≤ API Gateway

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å `GET /api/v1/users` –≤ Auth API
5. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å `GET /api/v1/users/me` –≤ Auth API
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å `GET /api/v1/users/search` –≤ Auth API

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
7. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å Swagger document–∞—Ü–∏—é
8. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å README file—ã
9. ‚úÖ –°–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é –¥–∏–∞–≥—Ä–∞–º–º—É

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ update:** 2025-11-16
**Status:** üîç –¢—Ä–µ–±—É–µ—Ç refactoring–∞
