# üß™ –¢–µ—Å—Ç—ã for api-admin

## üìã –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### 1. Unit —Ç–µ—Å—Ç—ã
–¢–µ—Å—Ç–∏—Ä—É—é—Ç department—å–Ω—ã–µ service—ã –∏ component—ã –≤ –∏–∑–æ–ª—è—Ü–∏–∏.

**Launch:**
```bash
nx test api-admin
```

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
- `src/auth/**/*.spec.ts`

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
–¢–µ—Å—Ç–∏—Ä—É—é—Ç interaction —Å —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

**Launch:**
```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ë–î
npm run test:auth:integration:setup

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
npm run test:auth:integration

# –ò–ª–∏ via Nx
nx test api-admin --testPathPattern=integration
```

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
- `src/auth/controllers/auth.controller.integration.spec.ts`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ó–∞–ø—É—â–µ–Ω–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è –ë–î (—Å–º. `docker-compose.test-auth.yml`)
- –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω–∞—è scheme Prisma

### 3. E2E —Ç–µ—Å—Ç—ã
–¢–µ—Å—Ç–∏—Ä—É—é—Ç HTTP endpoints via —Ä–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—É—â–µ–Ω–Ω—ã–π service.

**Launch:**
```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–∫—Äalready–Ω–∏–µ
npm run test:auth:e2e:setup

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
npm run test:auth:e2e
```

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
- `apps-e2e/src/auth/auth.spec.ts`

## üöÄ –ë—ã—Å—Ç—Ä—ã–π start

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ë–î:**
```bash
npm run test:auth:integration:setup
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:**
```bash
npm run test:auth:integration
```

### E2E —Ç–µ—Å—Ç—ã

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å service:**
```bash
npm run api:auth
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:**
```bash
npm run test:auth:e2e
```

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Åthere–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

‚úÖ **–£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è UUID
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫

‚ùå **–û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
- –ù–µ–≤–µ—Ä–Ω—ã–π format email
- –°–ª–∞–±—ã–π –ø–∞—Ä–æ–ª—å
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î when –æ—à–∏–±–∫–µ

üîÑ **–î—É–±–ª–∏–∫–∞—Ç—ã:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º email
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
- –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

üìä **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö users
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Äalready–Ω–∏—è for –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –¢–µ—Å—Ç–æ–≤–∞—è –ë–î (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
DATABASE_URL_ADMIN_TEST="postgresql://postgres:postgres@localhost:5437/workix_admin_test"

# –ò–ª–∏ use —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ë–î
DATABASE_URL_ADMIN_TEST="postgresql://postgres:postgres@localhost:5432/workix_admin"
```

### Docker Compose for —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î

–§–∞–π–ª: `docker-compose.test-auth.yml`

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose -f docker-compose.test-auth.yml up -d

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker-compose -f docker-compose.test-auth.yml down

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å data
docker-compose -f docker-compose.test-auth.yml down -v
```

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è information

- [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã README](./src/auth/controllers/README.integration-tests.md)
- [E2E —Ç–µ—Å—Ç—ã README](../../apps-e2e/src/auth/README.md)
